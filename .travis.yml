jobs:
  include:
    - language: java
      dist: trusty
      java:
        - 'oraclejdk8'
      stage: Testing and Build
      script: 
        - make build
        - make coverage
      after_success:
        - bash <(curl -s https://codecov.io/bash)

    - language: go
      go:
        - '1.14.x'
      services:
        - docker
      stage: Testing - End To End
      before_script:
        # Download and install kubectl
        - curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl && chmod +x kubectl && sudo mv kubectl /usr/local/bin/

        # Download and install KinD
        - GO111MODULE=on go get sigs.k8s.io/kind
        - kind create cluster
      script: make e2e
    


